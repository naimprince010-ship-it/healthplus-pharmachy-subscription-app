generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  USER
  ADMIN
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
}

enum PaymentMethod {
  COD
  ONLINE
}

enum BannerLocation {
  HOME_HERO
  HOME_MID
  CATEGORY_TOP
}

enum ProductType {
  MEDICINE
  GENERAL
}

enum PageGroup {
  QUICK_LINKS
  SUPPORT
  NONE
}

// AI Import Wizard enums
enum AiImportJobStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum AiProductDraftStatus {
  PENDING_REVIEW
  APPROVED
  REJECTED
  AI_ERROR
  MANUALLY_EDITED
}

// Phase 3: Image processing status for AiImportJob
enum AiImageJobStatus {
  NONE        // No images uploaded yet
  PENDING     // ZIP uploaded, not yet processed
  PROCESSING  // Currently processing images
  COMPLETED   // All images processed
  FAILED      // Image processing failed
}

// Phase 3: Image status for individual AiProductDraft
enum AiImageDraftStatus {
  UNMATCHED   // No image matched to this draft
  MATCHED     // Image matched but not yet processed
  PROCESSED   // Image processed (watermarked, resized, stored)
  MISSING     // Image was expected but not found in ZIP
  MANUAL      // Image manually uploaded by admin
}

model User {
  id            String           @id @default(cuid())
  name          String
  email         String?          @unique
  phone         String           @unique
  password      String
  role          Role             @default(USER)
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
  addresses     Address[]
  prescriptions Prescription[]
  orders        Order[]
  memberships   UserMembership[]
  subscriptions Subscription[]
  wishlistItems WishlistItem[]
  reviews       Review[]
}

model Address {
  id           String   @id @default(cuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  fullName     String
  phone        String
  addressLine1 String
  addressLine2 String?
  city         String
  zoneId       String
  zone         Zone     @relation(fields: [zoneId], references: [id])
  isDefault    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  orders       Order[]
}

model Zone {
  id             String         @id @default(cuid())
  name           String         @unique
  description    String? // List of areas covered
  deliveryCharge Float // Deprecated: use deliveryFee instead
  deliveryFee    Int? // Delivery fee in BDT
  deliveryDays   String
  isActive       Boolean        @default(true)
  sortOrder      Int            @default(0)
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  addresses      Address[]
  orders         Order[]
  subscriptions  Subscription[]
}

model Category {
  id                 String        @id @default(cuid())
  name               String        @unique
  slug               String        @unique
  description        String?
  imageUrl           String?
  parentCategoryId   String?
  parentCategory     Category?     @relation("CategoryToSubCategory", fields: [parentCategoryId], references: [id], onDelete: SetNull)
  subCategories      Category[]    @relation("CategoryToSubCategory")
  isActive           Boolean       @default(true)
  isMedicineCategory Boolean       @default(false) // Auto-sets product.type when creating/updating products
  discountPercentage Float?        // Category-wide discount percentage (0-100)
  sortOrder          Int           @default(0)
  showInSidebar      Boolean       @default(false)
  sidebarOrder       Int           @default(0)
  sidebarIconUrl     String?
  sidebarLinkUrl     String?       // Custom link URL for sidebar (e.g., /sections/women-s-choice)
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  medicines          Medicine[]
  products           Product[]
  homeSections       HomeSection[]
  // Phase 2: AI Import draft relations
  aiDraftsAsCategory    AiProductDraft[] // Drafts where this is the matched category
  aiDraftsAsSubcategory AiProductDraft[] @relation("SubcategoryDrafts") // Drafts where this is the matched subcategory
}

model Product {
  id          String      @id @default(cuid())
  type        ProductType
  name        String
  slug        String      @unique
  description String?

  // Media
  imageUrl  String?
  imagePath String? // Storage path for deletion

  // Pricing
  mrp               Float? // Maximum Retail Price
  sellingPrice      Float // Actual selling price
  purchasePrice     Float? // Cost price (what we pay to buy)
  discountPercentage Float? // Discount percentage (0-100)

  // Stock
  stockQuantity Int     @default(0)
  minStockAlert Int? // Low stock alert threshold
  inStock       Boolean @default(true)

  // Flash Sale Fields
  isFlashSale      Boolean   @default(false)
  flashSalePrice   Float?
  flashSaleStart   DateTime?
  flashSaleEnd     DateTime?

  // General Product Fields
  brandName    String? // Brand name (optional for medicines, common for general products)
  sizeLabel    String? // e.g., "50ml", "100g", "10 pcs", "1 device"
  unit         String  @default("pcs") // ml / g / pcs / pack / kit
  variantLabel String? // e.g., "Aloe Vera", "Lemon", "Red", "XL"
  keyFeatures  String? // Short text / bullet style features
  specSummary  String? // For devices ‚Äì simple text field for main specs

  // SEO Fields
  seoTitle       String?
  seoDescription String?
  seoKeywords    String?
  canonicalUrl   String?
  isFeatured     Boolean @default(false)

  // Search & Ranking
  popularityScore Int @default(0) // Derived from order count, used for search ranking

  // Membership discount override
  excludeFromMembershipDiscount Boolean @default(false)

  // Relations & Status
  categoryId     String
  category       Category      @relation(fields: [categoryId], references: [id])
  manufacturerId String?
  manufacturer   Manufacturer? @relation(fields: [manufacturerId], references: [id], onDelete: SetNull)
  isActive       Boolean       @default(true)
  deletedAt      DateTime?     // Soft delete timestamp

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  medicine        Medicine? // 1:1 relation for medicine-specific fields
  variants        ProductVariant[]
  orderItems      OrderItem[]
  cartSuggestions CartSuggestion[]
  wishlistItems   WishlistItem[]
  reviews         Review[]
}

model ProductVariant {
  id            String   @id @default(cuid())
  productId     String
  product       Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  variantName   String // e.g., "10's Strip", "250's pack", "50ml"
  unitLabel     String? // e.g., "/10's Strip", "/50ml", "/140 gm Tube" - shown after price
  sizeLabel     String? // e.g., "50ml", "100g"
  sku           String? // SKU / Barcode
  mrp           Float? // Variant-specific MRP
  sellingPrice  Float // Variant-specific selling price
  discountPercentage Float? // Variant-specific discount percentage (0-100)
  stockQuantity Int      @default(0)
  inStock       Boolean  @default(true)
  isDefault     Boolean  @default(false) // Mark as default variant for this product
  isActive      Boolean  @default(true)
  sortOrder     Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@unique([productId, variantName])
}

model Review {
  id        String   @id @default(cuid())
  rating    Int      // 1-5 star rating
  title     String?  // Optional review title
  comment   String?  // Review text
  
  // Relations
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  
  // Verification & Moderation
  isVerifiedPurchase Boolean @default(false) // True if user has purchased this product
  isApproved         Boolean @default(true)  // Admin can hide inappropriate reviews
  
  // Helpful votes
  helpfulCount    Int @default(0)
  notHelpfulCount Int @default(0)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@unique([userId, productId]) // One review per user per product
  @@index([productId])
  @@index([userId])
}

model Medicine {
  id   String @id @default(cuid())
  name String
  slug String @unique

  // Product system integration (optional during Phase 1, will be populated during migration)
  productId String?  @unique
  product   Product? @relation(fields: [productId], references: [id], onDelete: Cascade)

  // Medicine-specific fields
  genericName  String?
  brandName    String?
  manufacturer String // Required manufacturer field
  dosageForm   String? // e.g., Tablet, Capsule, Syrup, Injection
  packSize     String? // e.g., "1 strip x 10 tablets"
  description  String?
  strength     String?
  unit         String  @default("pcs")

  // Pricing (new fields)
  mrp                Float? // Maximum Retail Price
  sellingPrice       Float // Actual selling price
  purchasePrice      Float? // Cost price (what we pay to buy)
  discountPercentage Float? // Discount percentage (0-100)
  price              Float // Deprecated: use sellingPrice instead
  discountPrice      Float? // Deprecated: use mrp/sellingPrice instead
  unitPrice          Float? // Price per tablet/capsule
  stripPrice         Float? // Price per strip
  tabletsPerStrip    Int? // Number of tablets per strip

  // Stock
  stockQuantity Int     @default(0)
  minStockAlert Int? // Low stock alert threshold
  inStock       Boolean @default(true)

  // SEO Fields
  seoTitle       String?
  seoDescription String?
  seoKeywords    String?
  canonicalUrl   String?
  isFeatured     Boolean @default(false)

  // Media
  imageUrl  String?
  imagePath String? // Storage path for deletion

  // Additional Details
  uses                String? // Common uses
  sideEffects         String? // Side effects
  contraindications   String? // Contraindications
  storageInstructions String? // Storage instructions
  expiryDate          DateTime? // Expiry date

  // Relations & Status
  categoryId           String
  category             Category  @relation(fields: [categoryId], references: [id])
  requiresPrescription Boolean   @default(false)
  isActive             Boolean   @default(true)
  deletedAt            DateTime? // Soft delete timestamp

  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  orderItems        OrderItem[]
  prescriptionItems PrescriptionItem[]
}

model Prescription {
  id        String             @id @default(cuid())
  userId    String
  user      User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  name      String // Customer full name
  phone     String // Normalized phone number
  zoneId    String? // Delivery zone
  fileUrl   String // Prescription file URL
  fileType  String? // File MIME type
  status    String             @default("NEW") // NEW, REVIEWING, QUOTED, ORDERED, COMPLETED, CANCELLED
  notes     String? // Admin internal notes
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt
  items     PrescriptionItem[] // Prescription items parsed by admin
  order     Order? // Linked order if converted
}

model PrescriptionItem {
  id                   String       @id @default(cuid())
  prescriptionId       String
  prescription         Prescription @relation(fields: [prescriptionId], references: [id], onDelete: Cascade)
  medicineId           String? // Optional: mapped to actual Medicine
  medicine             Medicine?    @relation(fields: [medicineId], references: [id], onDelete: SetNull)
  medicineNameSnapshot String? // Snapshot of medicine name at time of selection (for historical accuracy)
  genericName          String // Generic name from prescription
  strength             String? // e.g., "500mg"
  quantity             Int // Quantity prescribed
  note                 String? // Additional notes
  createdAt            DateTime     @default(now())
  updatedAt            DateTime     @updatedAt
}

model Order {
  id                       String        @id @default(cuid())
  orderNumber              String        @unique
  userId                   String
  user                     User          @relation(fields: [userId], references: [id])
  addressId                String
  address                  Address       @relation(fields: [addressId], references: [id])
  zoneId                   String // Required: delivery zone for this order
  zone                     Zone          @relation(fields: [zoneId], references: [id])
  prescriptionId           String?       @unique // Optional: linked prescription
  prescription             Prescription? @relation(fields: [prescriptionId], references: [id], onDelete: SetNull)
  status                   OrderStatus   @default(PENDING)
  subtotal                 Float
  discount                 Float         @default(0)
  membershipDiscountAmount Float? // Membership discount applied
  membershipPlanName       String? // Membership plan name at time of order
  deliveryCharge           Float
  total                    Float
  paymentMethod            PaymentMethod @default(COD)
  paymentStatus            String        @default("PENDING")
  notes                    String?
  // Rider info (for shipped orders)
  riderName                String?
  riderPhone               String?
  // Estimated delivery time
  estimatedDeliveryAt      DateTime?
  estimatedDeliveryText    String? // Free text like "‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞ ‡ß®‡¶ü‡¶æ"
  createdAt                DateTime      @default(now())
  updatedAt                DateTime      @updatedAt
  items                    OrderItem[]
  statusHistory            OrderStatusHistory[]
}

model OrderItem {
  id      String @id @default(cuid())
  orderId String
  order   Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)

  // Product reference (new, will be used after migration in Phase 2)
  productId String?
  product   Product? @relation(fields: [productId], references: [id])

  // Medicine reference (legacy, keep for backward compatibility during Phase 1)
  medicineId String?
  medicine   Medicine? @relation(fields: [medicineId], references: [id])

  // Snapshot fields for historical accuracy (will be populated in Phase 2)
  productName String? // Product name at time of order
  productType String? // MEDICINE or GENERAL

  quantity  Int
  price     Float
  discount  Float    @default(0)
  total     Float
  createdAt DateTime @default(now())
}

// Order Status History - tracks status changes with timestamps for timeline
model OrderStatusHistory {
  id        String      @id @default(cuid())
  orderId   String
  order     Order       @relation(fields: [orderId], references: [id], onDelete: Cascade)
  status    OrderStatus
  note      String?     // Optional note about the status change
  changedAt DateTime    @default(now())

  @@index([orderId])
  @@index([orderId, changedAt])
}

model MembershipPlan {
  id              String           @id @default(cuid())
  name            String           @unique
  description     String?
  price           Float
  originalPrice   Float?
  durationDays    Int
  discountPercent Float
  badge           String?
  benefitsJson    Json?
  ctaText         String? // e.g., "Start Saving Today"
  isHighlighted   Boolean          @default(false)
  sortOrder       Int?
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  memberships     UserMembership[]
}

model MembershipPageSettings {
  id                     String   @id @default(cuid())
  heroHeadlineBn         String   @default("‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶ì‡¶∑‡ßÅ‡¶ß‡ßá‡¶∞ ‡¶ñ‡¶∞‡¶ö ‡ß®‡ß¶% ‡¶ï‡¶Æ‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶®‡¶ø‡¶® ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶´‡ßç‡¶∞‡¶ø!")
  heroSubheadlineBn      String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶´‡ßÅ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶ø‡¶§? ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶¶‡¶æ‡¶Ø‡¶º‡¶ø‡¶§‡ßç‡¶¨ ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡•§")
  guaranteeTextBn        String   @default("üîí ‡¶ï‡ßã‡¶®‡ßã ‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßÄ ‡¶ö‡ßÅ‡¶ï‡ßç‡¶§‡¶ø ‡¶®‡ßá‡¶á ‚Äî ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®")
  testimonialsJson       Json?
  updatedAt              DateTime @updatedAt
}

model UserMembership {
  id        String         @id @default(cuid())
  userId    String
  user      User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  planId    String
  plan      MembershipPlan @relation(fields: [planId], references: [id])
  startDate DateTime
  endDate   DateTime
  isActive  Boolean        @default(true)
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
}

model SubscriptionPlan {
  id               Int            @id @default(autoincrement())
  name             String
  slug             String         @unique
  shortDescription String? // Small text shown on cards
  itemsSummary     String? // Human-readable text list of items included
  itemsJson        Json? // Optional structured list for future use
  priceMonthly     Int // Price per month in BDT
  bannerImageUrl   String? // Banner/card image
  isFeatured       Boolean        @default(false)
  isActive         Boolean        @default(true)
  sortOrder        Int? // For ordering in UI
  subscriptions    Subscription[]
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model Subscription {
  id             Int              @id @default(autoincrement())
  userId         String
  user           User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  planId         Int
  plan           SubscriptionPlan @relation(fields: [planId], references: [id])
  pricePerPeriod Int
  status         String           @default("pending") // 'pending', 'active', 'paused', 'cancelled'
  paymentStatus  String           @default("unpaid") // 'unpaid', 'paid', 'refunded'
  paymentMethod  String           @default("cod") // 'cod', 'bkash', 'online'
  startDate      DateTime         @default(now())
  nextDelivery   DateTime
  address        String
  zoneId         String?
  zone           Zone?            @relation(fields: [zoneId], references: [id])
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
}

model Banner {
  id               String         @id @default(cuid())
  title            String
  subtitle         String?
  description      String?
  imageUrl         String // Legacy field, kept for backward compatibility
  imageDesktopUrl  String? // Desktop-specific image
  imageMobileUrl   String? // Mobile-specific image
  link             String? // Legacy field, kept for backward compatibility
  ctaLabel         String? // Call-to-action button label
  ctaUrl           String? // Call-to-action URL
  bgColor          String? // Background color
  textColor        String? // Text color
  location         BannerLocation @default(HOME_HERO) // Treated as locationCode
  order            Int            @default(0)
  isActive         Boolean        @default(true)
  startAt          DateTime? // Schedule start date/time
  endAt            DateTime? // Schedule end date/time
  visibilityDevice String         @default("all") // 'all' | 'desktop' | 'mobile'
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model HomeSection {
  id               String    @id @default(cuid())
  title            String
  slug             String    @unique
  filterType       String // 'category' | 'brand' | 'manual'
  categoryId       String?
  brandName        String?
  productIds       Json? // string[] of Product.id
  maxProducts      Int       @default(10)
  bgColor          String?
  badgeText        String?
  sortOrder        Int       @default(0)
  isActive         Boolean   @default(true)
  displayLocations Json      @default("[\"home\"]") // string[] of 'home' | 'dashboard' | 'cart'
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  category         Category? @relation(fields: [categoryId], references: [id])

  @@index([sortOrder])
  @@index([isActive, sortOrder])
}

model Page {
  id          String    @id @default(cuid())
  title       String
  slug        String    @unique
  content     String    @db.Text
  group       PageGroup @default(SUPPORT)
  sortOrder   Int       @default(0)
  isPublished Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([group, isPublished, sortOrder])
}

// Generic admin settings storage system
// No previous settings model existed in this codebase.
// This unified model stores all admin settings as JSON by key.
// Each key represents a settings section (e.g., "basic", "branding", "checkout", "facebook-pixel")
model Setting {
  id        String   @id @default(cuid())
  key       String   @unique // Settings section key (e.g., "basic", "branding", "checkout")
  value     Json     // Full settings object for that section
  updatedAt DateTime @updatedAt
}

// AI Product Import Wizard - Phase 1
// Stores import job metadata and tracks processing progress
model AiImportJob {
  id               String            @id @default(cuid())
  createdByAdminId String            // Admin user who created the import
  csvPath          String            // Supabase storage path to uploaded CSV
  status           AiImportJobStatus @default(PENDING)
  totalRows        Int?              // Total rows in CSV (set after parsing)
  processedRows    Int               @default(0) // Rows processed so far
  failedRows       Int               @default(0) // Rows that failed AI processing
  errorSummary     String?           // Summary of errors if any
  config           Json?             // Configuration: model name, batch size, etc.
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt

  // Phase 3: Image handling fields
  zipPath          String?           // Supabase storage path to uploaded images ZIP
  imageTotal       Int?              // Total number of images found in ZIP
  imageProcessed   Int               @default(0) // Number of images processed (watermarked, stored)
  imageStatus      AiImageJobStatus  @default(NONE) // Image processing status

  // Relations
  drafts AiProductDraft[]

  @@index([status])
  @@index([createdByAdminId])
}

// AI Product Import Wizard - Phase 1 & 2
// Stores individual product drafts with raw CSV data and AI suggestions
model AiProductDraft {
  id                 String               @id @default(cuid())
  importJobId        String               // FK to AiImportJob
  importJob          AiImportJob          @relation(fields: [importJobId], references: [id], onDelete: Cascade)
  rowIndex           Int                  // Original CSV row number (for reference)
  rawData            Json                 // Full original CSV row as JSON
  aiSuggestion       Json?                // AI-generated structured data (brand_name, strength, descriptions, etc.)
  aiConfidence       Float?               // Overall confidence score (0-1)
  status             AiProductDraftStatus @default(PENDING_REVIEW)
  publishedProductId String?              // FK to Product (set when approved and published)
  notes              String?              // Admin comments/notes
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt

  // Phase 2: Master table match IDs (set by AI or admin)
  genericMatchId      String?              // FK to Generic (matched generic)
  generic             Generic?             @relation(fields: [genericMatchId], references: [id])
  manufacturerMatchId String?              // FK to Manufacturer (matched manufacturer)
  manufacturer        Manufacturer?        @relation(fields: [manufacturerMatchId], references: [id])
  categoryMatchId     String?              // FK to Category (matched category)
  category            Category?            @relation(fields: [categoryMatchId], references: [id])
  subcategoryMatchId  String?              // FK to Category (matched subcategory)
  subcategory         Category?            @relation("SubcategoryDrafts", fields: [subcategoryMatchId], references: [id])

  // Phase 2: Field-level confidence scores (0-1)
  genericConfidence      Float?            // Confidence for generic match
  manufacturerConfidence Float?            // Confidence for manufacturer match
  categoryConfidence     Float?            // Confidence for category match

  // Phase 2: QC verification flags (admin must verify before approval)
  genericVerified      Boolean @default(false)
  manufacturerVerified Boolean @default(false)
  categoryVerified     Boolean @default(false)

  // Phase 2: Suggested new values (if no match found)
  newGenericSuggested      String?         // AI suggested new generic name
  newManufacturerSuggested String?         // AI suggested new manufacturer name

  // Phase 3: Image handling fields
  imageRawFilename     String?              // Filename inside ZIP that was matched (e.g., "Sergel_Capsule_20mg.webp")
  imageMatchConfidence Float?               // Confidence score for image match (0-1)
  imageStatus          AiImageDraftStatus   @default(UNMATCHED) // Image processing status
  imageUrl             String?              // Final URL/path of processed watermarked image

  @@index([importJobId])
  @@index([status])
  @@index([importJobId, status])
  @@index([genericMatchId])
  @@index([manufacturerMatchId])
  @@index([categoryMatchId])
  @@index([imageStatus])
}

// Cart Page Settings (singleton - only one row)
model CartPageSettings {
  id                       String   @id @default(cuid())
  freeDeliveryThreshold    Int      @default(499)
  freeDeliveryTextBn       String   @default("‡¶Ü‡¶∞ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ß≥{remaining} ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡¶ø‡¶®‡¶≤‡ßá ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶™‡¶æ‡¶¨‡ßá‡¶®!")
  freeDeliverySuccessTextBn String  @default("‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶® üéâ")
  promoLabelBn             String   @default("‡¶™‡ßç‡¶∞‡ßã‡¶Æ‡ßã ‡¶ï‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®")
  promoApplyTextBn         String   @default("[Apply]")
  deliveryInfoTextBn       String   @default("‡¶Ü‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø: ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤")
  totalMrpLabelBn          String   @default("‡¶Æ‡ßã‡¶ü ‡¶è‡¶Æ.‡¶Ü‡¶∞.‡¶™‡¶ø:")
  savingsLabelBn           String   @default("‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶õ‡ßá‡¶®:")
  grandTotalLabelBn        String   @default("‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:")
  checkoutButtonTextBn     String   @default("‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü")
  suggestionTitleBn        String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶ú‡ßá‡¶∂‡¶®")
  emptyCartTextBn          String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø")
  emptyCartSubtextBn       String   @default("‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶∂‡¶™‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá")
  startShoppingTextBn      String   @default("‡¶∂‡¶™‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®")
  cartTitleBn              String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü")
  updatedAt                DateTime @updatedAt
}

// Checkout Page Settings (singleton - only one row)
model CheckoutPageSettings {
  id                       String   @id @default(cuid())
  // Checkout page text
  pageTitleBn              String   @default("‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü")
  addressSectionTitleBn    String   @default("‡ßß. ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ")
  addAddressButtonBn       String   @default("+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®")
  paymentSectionTitleBn    String   @default("‡ß®. ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°")
  codLabelBn               String   @default("‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø")
  bkashLabelBn             String   @default("‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ / ‡¶®‡¶ó‡¶¶")
  couponSectionTitleBn     String   @default("‡ß©. ‡¶ï‡ßÅ‡¶™‡¶® ‡¶ï‡ßã‡¶°")
  couponPlaceholderBn      String   @default("‡¶ï‡ßÅ‡¶™‡¶® ‡¶ï‡ßã‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®")
  couponApplyBn            String   @default("Apply")
  orderSummarySectionTitleBn String @default("‡ß™. ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø")
  viewDetailsBn            String   @default("‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®")
  totalLabelBn             String   @default("‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:")
  confirmButtonBn          String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®")
  // Order success page text
  successPageTitleBn       String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶®")
  successLine1Bn           String   @default("‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø")
  successLine2Bn           String   @default("‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶≤‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá üéâ")
  orderIdLabelBn           String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø:")
  successTotalLabelBn      String   @default("‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:")
  successPaymentLabelBn    String   @default("‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶°:")
  infoNoteBn               String   @default("‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶è‡¶ï‡¶ú‡¶® ‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶´‡ßã‡¶® ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§")
  trackOrderButtonBn       String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®")
  goHomeButtonBn           String   @default("‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®")
  updatedAt                DateTime @updatedAt
}

// Order Tracking Page Settings (singleton - only one row)
model OrderTrackingSettings {
  id                       String   @id @default(cuid())
  // Header
  headerTitlePrefixBn      String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞")
  // Section titles
  statusSectionTitleBn     String   @default("‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏")
  deliverySectionTitleBn   String   @default("‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ")
  itemsSectionTitleBn      String   @default("‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡¶∏")
  totalLabelBn             String   @default("‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:")
  // Status labels
  placedLabelBn            String   @default("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßç‡¶≤‡ßá‡¶∏‡¶°")
  confirmedLabelBn         String   @default("‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡¶°")
  processingLabelBn        String   @default("‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç")
  shippedLabelBn           String   @default("‡¶∂‡¶ø‡¶™‡¶°/‡¶Ö‡¶® ‡¶¶‡ßç‡¶Ø ‡¶ì‡¶Ø‡¶º‡ßá")
  deliveredLabelBn         String   @default("‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶°")
  cancelledLabelBn         String   @default("‡¶¨‡¶æ‡¶§‡¶ø‡¶≤")
  // Rider info
  riderLabelBn             String   @default("‡¶∞‡¶æ‡¶á‡¶°‡¶æ‡¶∞:")
  callButtonBn             String   @default("Call")
  // Estimated delivery
  estimatedDeliveryLabelBn String   @default("‡¶Ü‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï ‡¶∏‡¶Æ‡¶Ø‡¶º:")
  // Footer / support
  supportTextBn            String   @default("‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®?")
  supportLinkTextBn        String   @default("‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®")
  supportPhone             String   @default("01700000000")
  updatedAt                DateTime @updatedAt
}

// Dashboard Page Settings (singleton - only one row)
model DashboardPageSettings {
  id                       String   @id @default(cuid())
  // Page title
  pageTitleBn              String   @default("‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°")
  welcomeTextBn            String   @default("‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ,")
  // Card visibility toggles
  showTotalOrdersCard      Boolean  @default(true)
  showSubscriptionsCard    Boolean  @default(true)
  showMembershipCard       Boolean  @default(true)
  showWishlistCard         Boolean  @default(true)
  showCrossSellSections    Boolean  @default(true)
  // Card labels (Bangla)
  totalOrdersLabelBn       String   @default("‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞")
  subscriptionsLabelBn     String   @default("‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶®")
  membershipLabelBn        String   @default("‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶∂‡¶ø‡¶™ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏")
  wishlistLabelBn          String   @default("‡¶â‡¶á‡¶∂‡¶≤‡¶ø‡¶∏‡ßç‡¶ü")
  // Membership upsell (when user has no membership)
  membershipUpsellTitleBn  String   @default("‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶®‡¶á ‡ß≥300 ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó ‡¶Æ‡¶ø‡¶∏ ‡¶ï‡¶∞‡¶õ‡ßá‡¶®!")
  membershipUpsellButtonBn String   @default("‡ß≠ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶´‡ßç‡¶∞‡¶ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶®‡¶ø‡¶®")
  // Membership active (when user has membership)
  membershipActiveTitleBn  String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßá {remaining} ‡¶ü‡¶ø ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶Ü‡¶õ‡ßá")
  // Section titles
  recentOrdersTitleBn      String   @default("‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞")
  viewAllBn                String   @default("‡¶∏‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®")
  subscriptionsTitleBn     String   @default("‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶®")
  curatedForYouTitleBn     String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ‡¶õ‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ")
  trendingNowTitleBn       String   @default("‡¶è‡¶ñ‡¶® ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç")
  // Empty states
  noOrdersTextBn           String   @default("‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡ßá‡¶á")
  startShoppingBn          String   @default("‡¶∂‡¶™‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶® ‚Üí")
  noSubscriptionsTextBn    String   @default("‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶®‡ßá‡¶á")
  browsePlansBn            String   @default("‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‚Üí")
  // Cross-sell settings
  curatedProductsCount     Int      @default(10)
  trendingProductsCount    Int      @default(10)
  updatedAt                DateTime @updatedAt
}

// Footer Settings (singleton - only one row)
model FooterSettings {
  id                String   @id @default(cuid())
  // Column 1: Brand Info
  brandName         String   @default("Halalzi")
  brandDescription  String   @default("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶∏‡¶ô‡ßç‡¶ó‡ßÄ‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡ßß‡ß¶‡ß¶% ‡¶Ö‡¶•‡ßá‡¶®‡¶ü‡¶ø‡¶ï ‡¶î‡¶∑‡¶ß ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶ø‡•§")
  drugLicense       String?
  tradeLicense      String?
  // Column 2: Quick Links - stored as JSON array [{label, href}]
  quickLinks        Json     @default("[{\"label\":\"‡¶π‡ßã‡¶Æ\",\"href\":\"/\"},{\"label\":\"‡¶∏‡¶¨ ‡¶î‡¶∑‡¶ß\",\"href\":\"/products\"},{\"label\":\"‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶∂‡¶ø‡¶™ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®\",\"href\":\"/membership\"},{\"label\":\"‡¶™‡ßç‡¶∞‡ßá‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶Ü‡¶™‡¶≤‡ßã‡¶°\",\"href\":\"/prescription\"},{\"label\":\"‡¶Ö‡¶´‡¶æ‡¶∞‡¶∏‡¶Æ‡ßÇ‡¶π\",\"href\":\"/offers\"}]")
  quickLinksTitle   String   @default("‡¶ï‡ßÅ‡¶á‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶∏")
  // Column 3: Support Links - stored as JSON array [{label, href}]
  supportLinks      Json     @default("[{\"label\":\"‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø\",\"href\":\"/pages/privacy\"},{\"label\":\"‡¶∞‡¶ø‡¶´‡¶æ‡¶®‡ßç‡¶° ‡¶ì ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø\",\"href\":\"/pages/refund\"},{\"label\":\"‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ\",\"href\":\"/pages/terms\"},{\"label\":\"‡¶∏‡¶ö‡¶∞‡¶æ‡¶ö‡¶∞ ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®\",\"href\":\"/pages/faq\"}]")
  supportLinksTitle String   @default("‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü")
  // Column 4: Contact Info
  contactTitle      String   @default("‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó")
  address           String   @default("‡¶¢‡¶æ‡¶ï‡¶æ, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂")
  phone             String   @default("01700000000")
  email             String?
  // Social Links - stored as JSON array [{platform, url}]
  socialLinks       Json     @default("[{\"platform\":\"facebook\",\"url\":\"https://facebook.com\"},{\"platform\":\"youtube\",\"url\":\"https://youtube.com\"}]")
  // App Download
  googlePlayUrl     String?
  appStoreUrl       String?
  // Copyright Bar
  copyrightText     String   @default("¬© 2025 Halalzi. All rights reserved.")
  developerCredit   String?
  // Payment Methods - stored as JSON array [{name, iconKey}]
  paymentMethods    Json     @default("[{\"name\":\"bKash\",\"iconKey\":\"bkash\"},{\"name\":\"Nagad\",\"iconKey\":\"nagad\"},{\"name\":\"Visa\",\"iconKey\":\"visa\"},{\"name\":\"Mastercard\",\"iconKey\":\"mastercard\"}]")
  // Styling
  bgColor           String   @default("#0b3b32")
  textColor         String   @default("#e0e0e0")
  headingColor      String   @default("#ffffff")
  hoverColor        String   @default("#0A9F6E")
  copyrightBgColor  String   @default("#04241e")
  updatedAt         DateTime @updatedAt
}

// Membership Banner Settings (singleton - only one row)
// This controls the membership teaser banner on the homepage
model MembershipBannerSettings {
  id          String   @id @default(cuid())
  isEnabled   Boolean  @default(true)
  // Badge text (top label)
  badge       String   @default("Premium Membership")
  // Main headline
  headline    String   @default("‡¶π‡¶æ‡¶≤‡¶æ‡¶≤‡¶ú‡¶ø ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶∂‡¶ø‡¶™")
  // Sub-headline / description
  subheadline String   @default("‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶° ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø, ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂‚Äî‡¶∏‡¶¨‡¶á ‡¶è‡¶ï ‡¶õ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶∞‡¶æ ‡¶á‡¶®‡¶≠‡ßá‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡•§")
  // Dynamic pricing text
  priceText   String   @default("‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ßØ‡ßØ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶•‡ßá‡¶ï‡ßá!")
  // CTA button
  ctaLabel    String   @default("‡¶∏‡¶¨ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®")
  ctaHref     String   @default("/membership")
  // Features list - stored as JSON array [{iconKey, text}]
  features    Json     @default("[{\"iconKey\":\"delivery\",\"text\":\"‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶° ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø\"},{\"iconKey\":\"discount\",\"text\":\"‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü\"},{\"iconKey\":\"doctor\",\"text\":\"‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞ ‡¶ï‡¶®‡¶∏‡¶æ‡¶≤‡¶ü‡ßá‡¶∂‡¶®\"}]")
  // Styling
  bgColor     String   @default("#0b3b32")
  textColor   String   @default("#ffffff")
  // Display locations - where to show the banner (home, dashboard, membership)
  displayLocations Json @default("[\"home\"]")
  // Banner image (optional) - shown on right side of desktop banner
  imageUrl    String?  // URL of the banner image
  imageAlt    String   @default("") // Alt text for accessibility
  imageSize   String   @default("medium") // small | medium | large - controls image width
  updatedAt   DateTime @updatedAt
}

// Cart Suggestions(cross-sell products shown in cart)
model CartSuggestion {
  id        String   @id @default(cuid())
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([isActive, sortOrder])
}

// Master Tables for AI Import Wizard - Phase 2

// Generic (active ingredient) master table
model Generic {
  id        String   @id @default(cuid())
  name      String   @unique // Primary generic name (e.g., "Esomeprazole")
  synonyms  Json?    // Array of alternative names/spellings (e.g., ["Esomeprazol", "Esomeprazole Magnesium"])
  slug      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  drafts AiProductDraft[]

  @@index([name])
}

// Manufacturer master table
model Manufacturer {
  id                    String   @id @default(cuid())
  name                  String   @unique // Primary manufacturer name (e.g., "Square Pharmaceuticals Ltd.")
  aliasList             Json?    // Array of alternative names (e.g., ["Square", "Square Pharma"])
  slug                  String   @unique
  logoUrl               String?  // Manufacturer logo image URL
  websiteUrl            String?  // Manufacturer website URL
  description           String?  // Manufacturer description
  phoneNumber           String?  // Contact phone number (e.g., "+8801XXXXXXXXX")
  requiresQcVerification Boolean @default(true) // Whether products from this manufacturer need extra QC
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  // Relations
  drafts   AiProductDraft[]
  products Product[]

  @@index([name])
}

// Wishlist - user-specific product favorites
model WishlistItem {
  id        String   @id @default(cuid())
  userId    String
  productId String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([userId, productId])
  @@index([userId])
}
